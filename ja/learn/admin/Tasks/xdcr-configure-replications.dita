<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic xml:lang="ja" id="topic_cyy_wh4_14">
  <title>XDCRレプリケーションの設定</title>
  <shortdesc>XDCRレプリケーションの設定はバケット単位に行います。</shortdesc>
  <body>

      <p>Webコンソールの<uicontrol>XDCR</uicontrol>タブからレプリケーションを設定します。 レプリケーションはバケット単位に設定します。 クラスタ内のすべてのバケットからデータをレプリケートするには、各バケットに対して個別のレプリケーションを設定します。</p>
    
      <p>XDCRを設定する前に:</p>
      <ul>
        <li>各クラスタ内のすべてのノードが対象のクラスタ内のすべてのノードと通信ができるように設定してください。 XDCRは二つのクラスタ間でレプリケーションを行うために、クラスタ内のすべてのノードを利用します。</li>
        <li>すべてのCouchbase Serverバージョンとプラットフォームが一致している必要があります。 例えばLinuxベースのクラスタからレプリケートするなら、もう一つのLinuxベースのクラスタが必要です。</li>
        <li>XDCRがレプリケーションを実行する際、TCP/IPの8092ポートを利用してデータを転送します; Couchbase ServerはTCP/IPの8091ポートを利用し、クラスタ設定情報を転送します。
					専用線やインターネットの先にあるクラスタへと通信をする場合、ソース、宛先の両クラスタ内のすべてのノードでお互いに8091ポートと8092ポートを利用した通信を可能にしてください。</li>
      </ul>
      <p><codeph>Ongoing Replications</codeph>は設定され稼働中のレプリケーションを指します。 現在の設定、現在のステータス、各レプリケーション設定における最終レプリケーション日時を監視することができます。</p><p>XDCRタブでは、XDCR用の<codeph>Remote Clusters</codeph>を設定することもできます; これらは名前付きの宛先クラスタで、レプリケーションの設定時に選択できます。 XDCRを設定するときは、宛先クラスタへの参照に、宛先クラスタ内の任意のノードのIPアドレスを指定します。</p><p>XDCRでレプリケーションを設定する前に、宛先のバケットがすでに存在するかを確認してください。 このバケットが存在しない場合、XDCRは宛先クラスタのシャードを見つけられません; このため、ソースバケットのいくつかのデータのみがレプリケートされ、レプリケーションが大幅に遅延します。 この場合、レプリケーションを複数回繰り返し、ソースバケットを完全に宛先へとレプリケートする必要があります。</p>
      <p>このため、宛先のバケットが存在するか必ず確認してください。 推奨される方法はバケットから任意のキーを参照することです。 もし、'key not found'エラーが返された、もしくはキーのドキュメントが返されたなら、そのバケットは存在し、クラスタ内の全ノードで利用可能です。 クラスタ内の任意のノードに対し、Couchbase SDKを利用してこれを実行できます。 </p>
    
  </body>
</topic>
