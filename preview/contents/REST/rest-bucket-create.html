<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Creating and editing buckets</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../assets/stylesheets/application.css"><link rel="stylesheet" href="../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation"><header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><a href="http://www.couchbase.com/learn" class="developer-porta-header__navigation__back">
							Return to Learn
						</a><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/developer">Developer Documentation</a></li><li class="developer-portal-header__navigation__item"><a href="http://developer.couchbase.com/mobile">Couchbase Mobile</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li><li class="developer-portal-header__navigation__item"><a href="http://docs.couchbase.com/archive-index">Documentation Archives</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><div class="developer-portal-sidebar__versions"><ul id="developer-portal-versions-navigation"><li class="active"><a href="#"><span>Version 3.0</span></a></li><li class=""><a href="http://docs.couchbase.com/archive-index"><span>Older</span></a></li></ul></div><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../Couchbase-intro.html"><span>はじめに</span></a></li><li class="section"><a href="../Whats-new-3.0.html"><span>3.0の新機能</span></a></li><li class="section section--has-sub-sections"><a href="../install-intro.html"><span>Installation and upgrade</span></a></li><li class="section section--has-sub-sections"><a href="../admin-intro.html"><span>Couchbase Serverの管理</span></a></li><li class="section section--has-sub-sections"><a href="../Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../cli-intro.html"><span>CLI reference</span></a></li><li class="section section--has-sub-sections section--active"><a href="../rest-intro.html"><span>REST API reference</span></a><ul class="sub-sections"><li class="section"><a href="../REST/overview-rest-api.html"><span>REST API overview</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-cluster-intro.html"><span>Cluster API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-rza.html"><span>Server groups API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-server-nodes.html"><span>Server nodes API</span></a></li><li class="section section--has-sub-sections section--active"><a href="../REST/rest-bucket-intro.html"><span>Buckets API</span></a><ul class="sub-sections"><li class="section"><a href="../REST/rest-buckets-summary.html"><span>Getting all bucket information</span></a></li><li class="section"><a href="../REST/rest-bucket-info.html"><span>Getting single bucket information</span></a></li><li class="section"><a href="../REST/rest-bucket-stats.html"><span>Getting bucket statistics</span></a></li><li class="section"><a href="../REST/rest-buckets-streamingURI.html"><span>Getting bucket streaming URI</span></a></li><li class="section"><a href="../REST/rest-bucket-create.html" class="current"><span>Creating and editing buckets</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../REST/rest-bucket-set-priority.html"><span>Setting disk I/O priority</span></a></li><li class="section"><a href="../REST/rest-bucket-metadata-ejection.html"><span>メタデータ除去設定</span></a></li><li class="section"><a href="../REST/rest-bucket-parameters.html"><span>Changing bucket parameters</span></a></li><li class="section"><a href="../REST/rest-bucket-auth.html"><span>Changing bucket authentication</span></a></li><li class="section"><a href="../REST/rest-bucket-memory-quota.html"><span>Changing bucket memory quota</span></a></li><li class="section"><a href="../REST/rest-bucket-delete.html"><span>Deleting buckets</span></a></li><li class="section"><a href="../REST/rest-bucket-flush.html"><span>Flushing buckets</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../REST/rest-views-intro.html"><span>Views API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-xdcr-intro.html"><span>XDCR API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/compaction-rest-api.html"><span>Compaction API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/logs-rest-api.html"><span>Logs API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-users.html"><span>User API</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1">Creating and editing buckets</h1>

	
	<div class="body refbody"><p class="shortdesc">To create and edit buckets, use the <samp class="ph codeph">POST</samp> operation with the 
			<samp class="ph codeph">/pools/default/bucket</samp> URI.
			</p>

		<div class="section"><h2 class="title sectiontitle">Description</h2>
			<p class="p">Buckets are created and edited with a <samp class="ph codeph">POST</samp> sent to the REST URI endpoint for buckets
				in a cluster. This can be used to create either a Couchbase or a Memcached type bucket.
				Bucket names cannot have a leading underscore.</p>

			
			<p class="p">This endpoint is also used to get a list of buckets that exist for a cluster.</p>

			<div class="note important"><span class="importanttitle">Important:</span>  When editing bucket properties, be sure to  specify all bucket properties.
				If a bucket property is not specified (whether or not you are changing the existing
				value), Couchbase Server may reset the property to the default. Even if you do not
				intend to change a certain property, re-specify the existing value to avoid this
				behavior.</div>

			<p class="p">The REST API returns a successful response when preliminary files for a data bucket are created
				on one node. However, if a multi-node cluster is implemented, bucket creation may not
				have completed for all nodes when a response is sent. Therefore, it is possible that the
				bucket is not available for operations immediately after this REST call successful
				returns.</p>

			<p class="p">To verify that a bucket is available, try to read a key from the bucket. If a ‘key not found’
				error is received or the document for the key is returned, then the bucket exists and is
				available to all nodes in a cluster. Key requests can be issued via a Couchbase SDK with
				any node in the cluster. See the <em class="ph i">Couchbase Developer Guide</em> for more
				information.</p>

		</div>

		
		<div class="section"><h2 class="title sectiontitle">HTTP method and URI</h2>
			<pre class="pre codeblock"><code>POST /pools/default/buckets</code></pre>

		
		<ul class="ul">
			<li class="li">Request data - List of payload parameters for the new bucket</li>

			<li class="li">Response data - JSON of the bucket confirmation or an error condition</li>

			<li class="li">Authentication required - Yes </li>

		</ul>

		
		
		<p class="p">Parameters for creating buckets:</p>


		
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. Create bucket parameters</span></caption>
				
				
				<thead class="thead" align="left">
					<tr class="row">
						<th class="entry" valign="top" width="38.02281368821293%" id="d89552e84">Payload Arguments</th>

						<th class="entry" valign="top" width="61.97718631178707%" id="d89552e87">Description</th>

					</tr>

				</thead>

				<tbody class="tbody">
					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">authType</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Required parameter. Type of authorization to be enabled for the new
							bucket as a string. Defaults to blank password if not specified. “sasl”
							enables authentication. “none” disables authentication.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">bucketType</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Required parameter. Type of bucket to be created. String value.
							“memcached” configures as Memcached bucket. “couchbase” configures as
							Couchbase bucket</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">flushEnabled</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Optional parameter. Enables the ‘flush all’ functionality on the
							specified bucket. Boolean. 1 enables flush all support, 0 disables flush
							all support. Defaults to 0.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">name</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Required parameter. Name for new bucket.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">parallelDBAndViewCompaction</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Optional parameter. String value. Indicates whether database and view
							files on disk can be compacted simultaneously. Defaults to
							“false.”</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">proxyPort</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Required parameter. Numeric. Proxy port on which the bucket
							communicates. Must be a valid network port which is not already in use.
							You must provide a valid port number if the authorization type is not
							SASL.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">ramQuotaMB</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Required parameter. RAM Quota for new bucket in MB. Numeric. The
							minimum you can specify is 100, and the maximum can only be as great as
							the memory quota established for the node. If other buckets are
							associated with a node, RAM Quota can only be as large as the amount
							memory remaining for the node, accounting for the other bucket memory
							quota.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">replicaIndex</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Optional parameter. Boolean. 1 enable replica indexes for replica
							bucket data while 0 disables. Default of 1.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">replicaNumber</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Optional parameter. Numeric. Number of replicas to be configured for
							this bucket. Required parameter when creating a Couchbase bucket.
							Default 1, minimum 0, maximum 3.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">saslPassword</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Optional Parameter. String. Password for SASL authentication.
							Required if SASL authentication has been enabled.</td>

					</tr>

					<tr class="row">
						<td class="entry" valign="top" width="38.02281368821293%" headers="d89552e84 "><samp class="ph codeph">threadsNumber</samp></td>

						<td class="entry" valign="top" width="61.97718631178707%" headers="d89552e87 ">Optional Parameter. Integer from 2 to 8. Change the number of concurrent readers and
							writers for the data bucket. </td>

					</tr>

				</tbody>

			</table>
</div>

		
		<p class="p">When creating a bucket, the <samp class="ph codeph">authType</samp> parameter must be provided:</p>

		<ul class="ul">
			<li class="li"><p class="p">If <samp class="ph codeph">authType</samp> is set to <samp class="ph codeph">none</samp>, then a proxyPort number must be specified.</p>
</li>

			<li class="li"><p class="p">If <samp class="ph codeph">authType</samp> is set to <samp class="ph codeph">sasl</samp>, then the <samp class="ph codeph">saslPassword</samp> parameter may optionally be specified.</p>
</li>

		</ul>

		<p class="p">The <samp class="ph codeph">ramQuotaMB</samp> parameter specifies how much memory, in megabytes, is 
			allocate to each node for the bucket. The minimum supported value is 100MB.</p>

		<ul class="ul">
			<li class="li"><p class="p">If the items stored in a memcached bucket take space beyond the
						<samp class="ph codeph">ramQuotaMB</samp>, Couchbase Sever typically evicts items on a 
					least-requested-item basis. Couchbase Server might evict other infrequently used
					items depending on object size or on whether or not an item is being referenced.</p>
</li>

			<li class="li"><p class="p">In the case of Couchbase buckets, the system might return temporary failures if the
						<samp class="ph codeph">ramQuotaMB</samp> is reached. The system tries to keep 25% of
					the available ramQuotaMB free for new items by ejecting old items from occupying
					memory. In the event these items are later requested, they are retrieved
					from disk.</p>
</li>

		</ul>

		</div>

		
		<div class="section"><h2 class="title sectiontitle">Syntax</h2>
			<p class="p">Curl request syntax:</p>

			<pre class="pre codeblock"><code>curl -X POST -u [admin]:[password] 
	-d name=[new-bucket-name] -d ramQuotaMB=[value] -d authType=[none | sasl] \
	-d replicaNumber=[value] -d proxyPort=[proxy-port] 
	http://[localhost]:8091/pools/default/buckets
			</code></pre>


		</div>

		
		<div class="section"><h2 class="title sectiontitle">Example</h2>
			
			<p class="p">Curl request example:</p>

			<pre class="pre codeblock"><code>curl -X POST -u admin:password 
	-d name=newbucket -d ramQuotaMB=200 -d authType=none \
	-d replicaNumber=2 -d proxyPort=11215 
	http://10.5.2.54:8091/pools/default/buckets
</code></pre>

			<p class="p">Raw HTTP request example:</p>

			<p class="p">The parameters for configuring the bucket are provided as payload data. Each
				parameter and value are provided as a key/value pair where each pair is separated by
				an ampersand. Include the parameters setting in the payload of the HTTP
					<samp class="ph codeph">POST</samp> request.</p>

			<pre class="pre codeblock"><code>POST /pools/default/buckets
HTTP/1.1
Host: 10.5.2.54:8091
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Authorization: Basic YWRtaW46YWRtaW4=
Content-Length: xx
name=newbucket&amp;ramQuotaMB=20&amp;authType=none&amp;replicaNumber=2&amp;proxyPort=11215
</code></pre>

		</div>

			
			<div class="section"><h2 class="title sectiontitle">Response</h2>
				<p class="p">If the bucket creation was successful, HTTP response 202 (Accepted) is returned with
					empty content.</p>

				<pre class="pre codeblock"><code>202 Accepted</code></pre>

			</div>

		
		<div class="section"><h2 class="title sectiontitle">Response codes</h2>
			
			<p class="p">If the bucket could not be created, because the parameter was missing or incorrect, HTTP
				response 400 returns, with a JSON payload containing the error reason.</p>

			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 2. Create bucket error codes</span></caption>
					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="24.69135802469136%" id="d89552e335">Error codes</th>

							<th class="entry" valign="top" width="75.30864197530865%" id="d89552e338">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="24.69135802469136%" headers="d89552e335 ">202</td>

							<td class="entry" valign="top" width="75.30864197530865%" headers="d89552e338 ">Accepted</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="24.69135802469136%" headers="d89552e335 ">204</td>

							<td class="entry" valign="top" width="75.30864197530865%" headers="d89552e338 ">Bad Request JSON with errors in the form of {“errors”: {…. }}
								name: Bucket with given name already exists ramQuotaMB: RAM Quota is
								too large or too small replicaNumber: Must be specified and must be
								a non-negative integer proxyPort: port is invalid, port is already
								in use</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="24.69135802469136%" headers="d89552e335 ">404</td>

							<td class="entry" valign="top" width="75.30864197530865%" headers="d89552e338 ">Object Not Found</td>

						</tr>

					</tbody>

				</table>
</div>

			
		</div>

	</div>

	<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-bucket-intro.html" title="The Buckets REST API creates, deletes, flushes, and retrieves information about buckets and bucket operations.">Buckets API</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../REST/rest-buckets-streamingURI.html" title="To retrieve the streaming URI, use GET /pools/default/buckets/default HTTP method and URI.">Getting bucket streaming URI</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../REST/rest-bucket-set-priority.html" title="The disk I/O priority for a bucket is set with the /pools/default/buckets/[bucket-name] URI and the threadNumber setting.">Setting disk I/O priority</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../Concepts/concept-readerWriter.html" title="Multi-threaded readers and writers provide multiple processes to simultaneously read and write data on disk. Simultaneous reads and writes increase disk speed and improve the read rate from disk.">Multiple readers and writers</a></div></div>
</nav>

</div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b> All rights reserved.</span><a href="http://www.couchbase.com/developers">Developer Portal</a><a href="http://forums.couchbase.com">Forums</a><a href="http://www.couchbase.com/downloads">Download</a><a href="http://support.couchbase.com/">Customer Support Login</a></p></footer></div></main><script src="../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../';</script><script src="../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>