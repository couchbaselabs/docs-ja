<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Changing bucket memory quota</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../assets/stylesheets/application.css"><link rel="stylesheet" href="../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation"><header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><a href="http://www.couchbase.com/learn" class="developer-porta-header__navigation__back">
							Return to Learn
						</a><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/developer">Developer Documentation</a></li><li class="developer-portal-header__navigation__item"><a href="http://developer.couchbase.com/mobile">Couchbase Mobile</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li><li class="developer-portal-header__navigation__item"><a href="http://docs.couchbase.com/archive-index">Documentation Archives</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><div class="developer-portal-sidebar__versions"><ul id="developer-portal-versions-navigation"><li class="active"><a href="#"><span>Version 3.0</span></a></li><li class=""><a href="http://docs.couchbase.com/archive-index"><span>Older</span></a></li></ul></div><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../Couchbase-intro.html"><span>はじめに</span></a></li><li class="section"><a href="../Whats-new-3.0.html"><span>3.0の新機能</span></a></li><li class="section section--has-sub-sections"><a href="../install-intro.html"><span>インストールとアップグレード</span></a></li><li class="section section--has-sub-sections"><a href="../admin-intro.html"><span>Couchbase Serverの管理</span></a></li><li class="section section--has-sub-sections"><a href="../Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections"><a href="../cli-intro.html"><span>CLIリファレンス</span></a></li><li class="section section--has-sub-sections section--active"><a href="../rest-intro.html"><span>REST APIリファレンス</span></a><ul class="sub-sections"><li class="section"><a href="../REST/overview-rest-api.html"><span>REST API overview</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-cluster-intro.html"><span>Cluster API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-rza.html"><span>Server groups API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-server-nodes.html"><span>Server nodes API</span></a></li><li class="section section--has-sub-sections section--active"><a href="../REST/rest-bucket-intro.html"><span>Buckets API</span></a><ul class="sub-sections"><li class="section"><a href="../REST/rest-buckets-summary.html"><span>Getting all bucket information</span></a></li><li class="section"><a href="../REST/rest-bucket-info.html"><span>Getting single bucket information</span></a></li><li class="section"><a href="../REST/rest-bucket-stats.html"><span>Getting bucket statistics</span></a></li><li class="section"><a href="../REST/rest-buckets-streamingURI.html"><span>Getting bucket streaming URI</span></a></li><li class="section"><a href="../REST/rest-bucket-create.html"><span>Creating and editing buckets</span></a></li><li class="section"><a href="../REST/rest-bucket-set-priority.html"><span>Setting disk I/O priority</span></a></li><li class="section"><a href="../REST/rest-bucket-metadata-ejection.html"><span>メタデータ除去設定</span></a></li><li class="section"><a href="../REST/rest-bucket-parameters.html"><span>Changing bucket parameters</span></a></li><li class="section"><a href="../REST/rest-bucket-auth.html"><span>Changing bucket authentication</span></a></li><li class="section"><a href="../REST/rest-bucket-memory-quota.html" class="current"><span>Changing bucket memory quota</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../REST/rest-bucket-delete.html"><span>Deleting buckets</span></a></li><li class="section"><a href="../REST/rest-bucket-flush.html"><span>Flushing buckets</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../REST/rest-views-intro.html"><span>Views API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-xdcr-intro.html"><span>XDCR API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/compaction-rest-api.html"><span>Compaction API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/logs-rest-api.html"><span>Logs API</span></a></li><li class="section section--has-sub-sections"><a href="../REST/rest-users.html"><span>ユーザAPI</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
  <h1 class="title topictitle1">Changing bucket memory quota</h1>

  

  <div class="body refbody"><p class="shortdesc">To increase or decrease bucket memory quota, use the <samp class="ph codeph">POST
            /pools/default/buckets/newBucket</samp> HTTP method and URI and the
            <samp class="ph codeph">ramQuotaMB</samp> option.</p>

    
    <div class="section"><h2 class="title sectiontitle">Description</h2>
      <p class="p">A bucket’s ramQuotaMB can be increased and decreased from its current level. However, while
      increasing will do no harm, decreasing should be done with proper sizing. Decreasing the
      bucket’s ramQuotaMB lowers the watermark, and some items may be unexpectedly ejected if the
      ramQuotaMB is set too low.</p>

      
      <div class="note note"><span class="notetitle">Note:</span>  There are some known issues with changing the ramQuotaMB for memcached bucket types.</div>

      <div class="note important"><span class="importanttitle">Important:</span> When changing the active bucket configuration, specify the existing
        configuration parameters and the changed authentication parameters.</div>

    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Syntax</h2>
      <p class="p">Curl request syntax:</p>

      <pre class="pre codeblock"><code>curl -X POST -u [admin]:[password] 
  -d ramQuotaMB=[value] -d authType=[none | sasl]
  -d proxyPort=[port] 
  http://[localhost]:8091/pools/default/buckets/[bucket-name]</code></pre>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Example</h2>
      <p class="p">Curl request example:</p>

      <pre class="pre codeblock"><code>curl -X POST -u Administrator:password 
  -d ramQuotaMB=130 
  -d authType=none
  -d proxyPort=11215 
  http://10.5.2.117:8091/pools/default/buckets/newBucket</code></pre>

     </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Response</h2>
      <p class="p">A 202 response indicates that the quota will be changed asynchronously throughout the
        servers in the cluster.</p>

      <pre class="pre codeblock"><code>HTTP/1.1 202 OK
Server: Couchbase Server 1.6.0
Pragma: no-cache
Date: Wed, 29 Sep 2010 20:01:37 GMT
Content-Length: 0
Cache-Control: no-cache no-store max-age=0
</code></pre>

        
        <p class="p">If the ram quota is too low, an error and usage summary is returned:</p>

        <pre class="pre codeblock"><code>{
    "errors": {
        "ramQuotaMB": "RAM quota cannot be less than 100 MB"
    }, 
    "summaries": {
        "hddSummary": {
            "free": 46214973056, 
            "otherBuckets": 16839602, 
            "otherData": 10095646158, 
            "thisUsed": 26456826, 
            "total": 56327458816
        }, 
        "ramSummary": {
            "free": 242221056, 
            "nodesCount": 1, 
            "otherBuckets": 268435456, 
            "perNodeMegs": 25, 
            "thisAlloc": 26214400, 
            "thisUsed": 33911144, 
            "total": 536870912
        }
    }
}</code></pre>

    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Response codes</h2>
        <pre class="pre codeblock"><code>202 OK</code></pre>

    </div>


  </div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-bucket-intro.html" title="The Buckets REST API creates, deletes, flushes, and retrieves information about buckets and bucket operations.">Buckets API</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../REST/rest-bucket-auth.html" title="To change bucket authentication use the POST /pools/default/buckets/acache HTTP method and URI with the authType parameter.">Changing bucket authentication</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../REST/rest-bucket-delete.html" title="To delete buckets, use the DELETE /pools/default/buckets/[bucket-name] HTTP method and URI.">Deleting buckets</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b> All rights reserved.</span><a href="http://www.couchbase.com/developers">Developer Portal</a><a href="http://forums.couchbase.com">Forums</a><a href="http://www.couchbase.com/downloads">Download</a><a href="http://support.couchbase.com/">Customer Support Login</a></p></footer></div></main><script src="../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../';</script><script src="../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>