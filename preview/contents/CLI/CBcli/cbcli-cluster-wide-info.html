<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Diagnostics with couchbase-cli</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation"><header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><a href="http://www.couchbase.com/learn" class="developer-porta-header__navigation__back">
							Return to Learn
						</a><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/developer">Developer Documentation</a></li><li class="developer-portal-header__navigation__item"><a href="http://developer.couchbase.com/mobile">Couchbase Mobile</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li><li class="developer-portal-header__navigation__item"><a href="http://docs.couchbase.com/archive-index">Documentation Archives</a></li></ul><div class="developer-portal-header__search"><script>
					  (function() {
					    var cx = '018016427239405524608:fkg1v30apnm';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script><gcse:search></gcse:search></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><div class="developer-portal-sidebar__versions"><ul id="developer-portal-versions-navigation"><li class="active"><a href="#"><span>Version 3.0</span></a></li><li class=""><a href="http://docs.couchbase.com/archive-index"><span>Older</span></a></li></ul></div><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../Couchbase-intro.html"><span>はじめに</span></a></li><li class="section"><a href="../../Whats-new-3.0.html"><span>3.0の新機能</span></a></li><li class="section section--has-sub-sections"><a href="../../install-intro.html"><span>インストールとアップグレード</span></a></li><li class="section section--has-sub-sections"><a href="../../admin-intro.html"><span>Couchbase Serverの管理</span></a></li><li class="section section--has-sub-sections"><a href="../../Views/views-intro.html"><span>Views and indexes</span></a></li><li class="section section--has-sub-sections section--active"><a href="../../cli-intro.html"><span>CLIリファレンス</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../CLI/cli-overview.html"><span>CLI overview</span></a></li><li class="section section--has-sub-sections section--active"><a href="../../CLI/cbcli-intro.html"><span>couchbase-cli tool</span></a><ul class="sub-sections"><li class="section"><a href="../../CLI/CBcli/cbcli-commands.html"><span>couchbase-cli commands</span></a></li><li class="section"><a href="../../CLI/CBcli/cbcli-rza.html"><span>Rack-zone awareness</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/CBcli/cbcli-buckets.html"><span>バケット</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/CBcli/cbcli-servers.html"><span>Server nodes</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/CBcli/cbcli-xdcr.html"><span>XDCR</span></a></li><li class="section"><a href="../../CLI/CBcli/cbcli-cluster-wide-info.html" class="current"><span>Diagnostics with couchbase-cli</span></a><ul class="sub-sections"></ul></li></ul></li><li class="section"><a href="../../CLI/cbanalyze-core_tool.html"><span>cbanalyze-coreツール</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbbackup_tool.html"><span>cbbackupツール</span></a></li><li class="section"><a href="../../CLI/cbcollect_info_tool.html"><span>cbcollect_info tool</span></a></li><li class="section"><a href="../../CLI/cbdocloader_tool.html"><span>cbdocloader tool</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbepctl-intro.html"><span>cbepctlツール</span></a></li><li class="section"><a href="../../CLI/cbhealthchecker_tool.html"><span>cbhealthchecker tool</span></a></li><li class="section"><a href="../../CLI/cbreset_password_tool.html"><span>cbreset_password tool</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbrestore_tool.html"><span>cbrestore tool</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbstats-intro.html"><span>cbstats tool</span></a></li><li class="section"><a href="../../CLI/cbtransfer_tool.html"><span>cbtransfer tool</span></a></li><li class="section"><a href="../../CLI/cbworkloadgen_tool.html"><span>cbworkloadgen tool</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../rest-intro.html"><span>REST APIリファレンス</span></a></li><li class="section section--has-sub-sections"><a href="../../rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1">Diagnostics with couchbase-cli</h1>

	
	<div class="body conbody"><p class="shortdesc">You can start, stop, and view status of a diagnostics collection by using the <samp class="ph codeph">couchbase-cli</samp> tool.</p>

		<div class="section"><h2 class="title sectiontitle">Start log collection command</h2>
			
			<p class="p">The start log collection command initiates a log collection process. You must specify
				whether to collect logs from all nodes or only specified nodes. You can optionally
				request the logs to be uploaded to Couchbase. If you request an upload to Couchbase, you
				must include the name of your organization and optionally a support ticket number. The
				command uses the following syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-start</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 <span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
				<span class="ph delim">{</span>
				<span class="keyword option">--nodes</span><span class="ph oper">=</span><span class="ph var">node1,node2,...</span>
				<span class="ph delim">|</span>
				<span class="keyword option">--all-nodes</span>
				<span class="ph delim">}</span> [--upload <span class="keyword option">--upload-host</span><span class="ph delim">=</span><span class="ph var">host</span>
				<span class="keyword option">--customer</span><span class="ph oper">=</span><span class="ph var">name</span>
					[<span class="keyword option">--ticket</span><span class="ph oper">=</span><span class="ph var">ticketNumber</span> ] ] </span>
		</div>


		<div class="section"><h2 class="title sectiontitle">Stop log collection command</h2>
			
			<p class="p">The stop log collection command cancels collection on each node. It uses the following
				syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-stop</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 <span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
			</span>
		</div>


		<div class="section"><h2 class="title sectiontitle">Report log collection status command</h2>
			
			<p class="p">The report log collection status command returns information about each node. It uses
				the following syntax:</p>

			<span class="ph synph">
				<span class="keyword kwd">couchbase-cli</span>
				<span class="keyword kwd">collect-logs-status</span>
				<span class="keyword option">-c</span>
				<span class="ph var">host</span>:8091 
				<span class="keyword option">-u</span>
				<span class="ph var">username</span>
				<span class="keyword option">-p</span>
				<span class="ph var">password</span>
			</span>
		</div>

	</div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../CLI/cbcli-intro.html" title="The couchbase-cli tool is used to perform operations on an entire cluster.">couchbase-cli tool</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../CLI/CBcli/cbcli-xdcr.html" title="XDCR commands used with the couchbase-cli tool.">XDCR</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b> All rights reserved.</span><a href="http://www.couchbase.com/developers">Developer Portal</a><a href="http://forums.couchbase.com">Forums</a><a href="http://www.couchbase.com/downloads">Download</a><a href="http://support.couchbase.com/">Customer Support Login</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>