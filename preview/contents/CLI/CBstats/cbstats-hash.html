<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Hash</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../../assets/stylesheets/application.css"><link rel="stylesheet" href="../../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation"><header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><a href="http://www.couchbase.com/learn" class="developer-porta-header__navigation__back">
							Return to Learn
						</a><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/developer">Developer Documentation</a></li><li class="developer-portal-header__navigation__item"><a href="http://developer.couchbase.com/mobile">Couchbase Mobile</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li><li class="developer-portal-header__navigation__item"><a href="http://docs.couchbase.com/archive-index">Documentation Archives</a></li></ul><div class="developer-portal-header__search"></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><div class="developer-portal-sidebar__versions"><ul id="developer-portal-versions-navigation"><li class="active"><a href="#"><span>Version 3.0</span></a></li><li class=""><a href="http://docs.couchbase.com/archive-index"><span>Older</span></a></li></ul></div><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../../Couchbase-intro.html"><span>はじめに</span></a></li><li class="section"><a href="../../Whats-new-3.0.html"><span>3.0の新機能</span></a></li><li class="section section--has-sub-sections"><a href="../../install-intro.html"><span>インストールとアップグレード</span></a></li><li class="section section--has-sub-sections"><a href="../../admin-intro.html"><span>Couchbase Serverの管理</span></a></li><li class="section section--has-sub-sections"><a href="../../Views/views-intro.html"><span>Viewとインデックス</span></a></li><li class="section section--has-sub-sections section--active"><a href="../../cli-intro.html"><span>CLIリファレンス</span></a><ul class="sub-sections"><li class="section section--has-sub-sections"><a href="../../CLI/cli-overview.html"><span>CLI overview</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbcli-intro.html"><span>couchbase-cli tool</span></a></li><li class="section"><a href="../../CLI/cbanalyze-core_tool.html"><span>cbanalyze-coreツール</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbbackup_tool.html"><span>cbbackupツール</span></a></li><li class="section"><a href="../../CLI/cbcollect_info_tool.html"><span>cbcollect_info tool</span></a></li><li class="section"><a href="../../CLI/cbdocloader_tool.html"><span>cbdocloader tool</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbepctl-intro.html"><span>cbepctlツール</span></a></li><li class="section"><a href="../../CLI/cbhealthchecker_tool.html"><span>cbhealthchecker tool</span></a></li><li class="section"><a href="../../CLI/cbreset_password_tool.html"><span>cbreset_password tool</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/cbrestore_tool.html"><span>cbrestore tool</span></a></li><li class="section section--has-sub-sections section--active"><a href="../../CLI/cbstats-intro.html"><span>cbstats tool</span></a><ul class="sub-sections"><li class="section"><a href="../../CLI/CBstats/cbstats-generalform.html"><span>General form</span></a></li><li class="section section--has-sub-sections"><a href="../../CLI/CBstats/cbstats-all.html"><span>All</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-allocator.html"><span>Allocator</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-checkpoint.html"><span>Checkpoint</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-config.html"><span>Config</span></a></li><li class="section"><a href="../../CLI/cli-cbstats-dcp.html"><span>DCP</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-diskinfo.html"><span>Diskinfo</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-dispatcher-job.html"><span>Dispatcher</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-failovers.html"><span>Failovers</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-hash.html" class="current"><span>Hash</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../../CLI/CBstats/cbstats-keyvkey.html"><span>Key and vkey</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-kv.html"><span>Kvstore and kvtimings</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-memory.html"><span>Memory</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-reset.html"><span>Reset</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-runtimes.html"><span>Runtimes</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-scheduler.html"><span>Scheduler</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-tap.html"><span>Tap</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-timing.html"><span>Timings</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-uuid.html"><span>UUID</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-vbucket.html"><span>vBucket</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-warmup.html"><span>Warmup</span></a></li><li class="section"><a href="../../CLI/CBstats/cbstats-workload.html"><span>Workload</span></a></li></ul></li><li class="section"><a href="../../CLI/cbtransfer_tool.html"><span>cbtransfer tool</span></a></li><li class="section"><a href="../../CLI/cbworkloadgen_tool.html"><span>cbworkloadgen tool</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../../rest-intro.html"><span>REST APIリファレンス</span></a></li><li class="section section--has-sub-sections"><a href="../../rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
	<h1 class="title topictitle1">Hash</h1>

	
	<div class="body refbody"><p class="shortdesc">The <samp class="ph codeph">cbstats hash</samp> command provides information on vBucket hash tables.</p>

		<div class="section"><h2 class="title sectiontitle">Description</h2>
		<p class="p">Requesting these stats does affect performance, so don’t do it too regularly, but it’s useful
				for debugging certain types of performance issues. For example, if your hash table
				is tuned to have too few buckets for the data load within it, the max_depth will be
				too large and performance will suffers.</p>

		
		<p class="p">It is also possible to get more detailed hash tables stats by using ‘hash detail’. 
			This prints per-vbucket stats. 
			Each stat is prefixed with vb_ followed by a number, a colon, then the individual stat
			name. For example, the stat representing the size of the hash table for vbucket 0 is
			vb_0:size=.</p>

		
		</div>

		
		<div class="section"><h2 class="title sectiontitle">Syntax</h2>
		<p class="p">Request syntax:</p>

		<pre class="pre codeblock"><code>cbstats [hostname]:11210 hash
cbstats [hostname]:11210 hash detail
		</code></pre>

		</div>

		
		<div class="section"><h2 class="title sectiontitle">Example: hash</h2>
			<p class="p">Request example:</p>

			<pre class="pre codeblock"><code>cbstats 10.5.2.54:11210 hash</code></pre>
</div>

		
		<div class="section"><h2 class="title sectiontitle">Example: hash detail</h2>
			<p class="p">Request example:</p>

			<pre class="pre codeblock"><code>cbstats 10.5.2.54:11210 hash detail</code></pre>
</div>

		
		<div class="section"><h2 class="title sectiontitle">Response: hash</h2>
			<p class="p">Example response:</p>

			<pre class="pre codeblock"><code>
 avg_count:    0
 avg_max:      0
 avg_min:      0
 largest_max:  0
 largest_min:  0
 max_count:    0
 min_count:    0
 total_counts: 0
			</code></pre>

		
			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="50%" id="d16333e82">Stat</th>

							<th class="entry" valign="top" width="50%" id="d16333e85">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">avg_count</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The average number of items per vbucket</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">avg_max</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The average max depth of a vbucket hash table</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">avg_min</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The average min depth of a vbucket hash table</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">largest_max</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The largest hash table depth of in all vbuckets</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">largest_min</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The largest minimum hash table depth of all vbuckets</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">max_count</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The largest number of items in a vbucket</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">min_count</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The smallest number of items in a vbucket</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e82 ">total_counts</td>

							<td class="entry" valign="top" width="50%" headers="d16333e85 ">The total number of items in all vbuckets</td>

						</tr>

					</tbody>

				</table>
</div>

		</div>


		
		<div class="section"><h2 class="title sectiontitle">Response: hash detail</h2>
			<p class="p">Example response:</p>

			<pre class="pre codeblock"><code>
 avg_count:                0
 avg_max:                  0
 avg_min:                  0
 largest_max:              0
 largest_min:              0
 max_count:                0
 min_count:                0
 total_counts:             0
 vb_0:counted:             0
 vb_0:locks:               5
 vb_0:max_depth:           0
 vb_0:mem_size:            0
 vb_0:mem_size_counted:    0
 vb_0:min_depth:           0
 vb_0:reported:            0
 vb_0:resized:             0
 vb_0:size:                3079
 vb_0:state:               replica
 ...
			</code></pre>

		
			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="50%" id="d16333e192">Stat</th>

							<th class="entry" valign="top" width="50%" id="d16333e195">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">state</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">The current state of this vbucket</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">size</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Number of hash buckets</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">locks</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Number of locks covering hash table operations</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">min_depth</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Minimum number of items found in a bucket</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">max_depth</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Maximum number of items found in a bucket</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">reported</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Number of items this hash table reports having</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">counted</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Number of items found while walking the table</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">resized</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Number of times the hash table resized</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">mem_size</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Running sum of memory used by each item</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d16333e192 ">mem_size_counted</td>

							<td class="entry" valign="top" width="50%" headers="d16333e195 ">Counted sum of current memory used by each item</td>

						</tr>

					</tbody>

				</table>
</div>

		</div>

		
	</div>

<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../CLI/cbstats-intro.html" title="The cbstats tool is used to get node and cluster-level statistics about performance and items in storage.">cbstats tool</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../CLI/CBstats/cbstats-failovers.html" title="The cbstats failovers command provides ID, sequence, and number of entries information.">Failovers</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../CLI/CBstats/cbstats-keyvkey.html" title="The cbstats key and cbstats vkey commands provide information on keys.">Key and vkey</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b> All rights reserved.</span><a href="http://www.couchbase.com/developers">Developer Portal</a><a href="http://forums.couchbase.com">Forums</a><a href="http://www.couchbase.com/downloads">Download</a><a href="http://support.couchbase.com/">Customer Support Login</a></p></footer></div></main><script src="../../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../../';</script><script src="../../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>