<!DOCTYPE html><html xmlns:related-links="http://dita-ot.sourceforge.net/ns/200709/related-links" class="no-js developer-portal" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Supported upgrade paths</title><meta name="apple-mobile-web-app-title" content="Couchbase"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"><link rel="stylesheet" href="../assets/stylesheets/application.css"><link rel="stylesheet" href="../assets/stylesheets/docs.css"></head><body data-modules="developer-portal-sidebar-navigation developer-portal-versions-navigation"><header class="developer-portal-header" role="banner"><div class="layout-wrapper"><div class="developer-portal-header__hgroup"><h1 class="developer-portal-header__logo"><a href="http://couchbase.com" rel="home">Couchbase</a></h1><p class="developer-portal-header__page-title">Couchbase Server</p></div><nav class="developer-portal-header__navigation" id="primary-navigation" role="navigation"><div class="developer-portal-header__navigation__wrapper" id="primary-navigation__wrapper"><a href="http://www.couchbase.com/learn" class="developer-porta-header__navigation__back">
							Return to Learn
						</a><ul class="developer-portal-header__navigation__items"><li class="developer-portal-header__navigation__item"><a href="/developer">Developer Documentation</a></li><li class="developer-portal-header__navigation__item"><a href="http://developer.couchbase.com/mobile">Couchbase Mobile</a></li><li class="developer-portal-header__navigation__item"><a href="http://www.couchbase.com/open-source">Open Source Projects</a></li><li class="developer-portal-header__navigation__item"><a href="http://forums.couchbase.com">Forums</a></li><li class="developer-portal-header__navigation__item"><a href="http://docs.couchbase.com/archive-index">Documentation Archives</a></li></ul><div class="developer-portal-header__search"></div></div></nav></div></header><main class="developer-portal-global-content" role="main"><aside class="developer-portal-sidebar"><div class="developer-portal-sidebar__versions"><ul id="developer-portal-versions-navigation"><li class="active"><a href="#"><span>Version 3.0</span></a></li><li class=""><a href="http://docs.couchbase.com/archive-index"><span>Older</span></a></li></ul></div><nav class="developer-portal-sidebar__navigation"><div class="developer-portal-sidebar__navigation__wrapper" id="developer-portal-sidebar-navigation"><ul><li class="section section--has-sub-sections"><a href="../Couchbase-intro.html"><span>はじめに</span></a></li><li class="section"><a href="../Whats-new-3.0.html"><span>3.0の新機能</span></a></li><li class="section section--has-sub-sections section--active"><a href="../install-intro.html"><span>インストールとアップグレード</span></a><ul class="sub-sections"><li class="section"><a href="../Install/setup-overview.html"><span>Couchbaseセットアップの概要</span></a></li><li class="section section--has-sub-sections"><a href="../Install/pre-install.html"><span>インストール要件</span></a></li><li class="section section--has-sub-sections"><a href="../Install/RHEL-install-intro.html"><span>Red Hat/CentOS installation</span></a></li><li class="section section--has-sub-sections"><a href="../Install/Ubuntu-install.html"><span>UbuntuまたはDebianへのインストール方法</span></a></li><li class="section section--has-sub-sections"><a href="../Install/Windows-install.html"><span>Microsoft Windows へのインストール</span></a></li><li class="section section--has-sub-sections"><a href="../Install/Mac-install.html"><span>Mac OS X へのインストール</span></a></li><li class="section section--has-sub-sections"><a href="../Install/post-install.html"><span>インストール後の設定</span></a></li><li class="section section--has-sub-sections section--active"><a href="../Install/upgrading.html"><span>Upgrading </span></a><ul class="sub-sections"><li class="section"><a href="../Install/supported_upgrade-paths.html" class="current"><span>Supported upgrade paths</span></a><ul class="sub-sections"></ul></li><li class="section"><a href="../Install/upgrade-online.html"><span>Online upgrade with swap rebalance</span></a></li><li class="section"><a href="../Install/upgrade-offline.html"><span>Offline upgrade</span></a></li><li class="section"><a href="../Install/upgrade-individual-nodes.html"><span>Upgrading one node</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../Install/migrating.html"><span>Migrating</span></a></li></ul></li><li class="section section--has-sub-sections"><a href="../admin-intro.html"><span>Couchbase Serverの管理</span></a></li><li class="section section--has-sub-sections"><a href="../Views/views-intro.html"><span>Viewとインデックス</span></a></li><li class="section section--has-sub-sections"><a href="../cli-intro.html"><span>CLIリファレンス</span></a></li><li class="section section--has-sub-sections"><a href="../rest-intro.html"><span>REST APIリファレンス</span></a></li><li class="section section--has-sub-sections"><a href="../rel-notes/rel-notes3.0.html"><span>Release notes</span></a></li></ul></div></nav></aside><div class="developer-portal-content"><div class="developer-portal-content__wrapper textblock__content">
  <h1 class="title topictitle1">Supported upgrade paths</h1>
 
  <div class="body"><p class="shortdesc">The supplied supported paths apply both to online and offline upgrades.</p>

    <p class="p">There are two basic upgrade paths for the Couchbase Server:</p>

    <ul class="ul">
      <li class="li">Couchbase 2.x to a later version of Couchbase 2.x.</li>

      <li class="li">Couchbase 2.x to Couchbase 3.0.</li>

    </ul>

    <p class="p">You must upgrade to the latest available production version before upgrading to Couchbase
      Server 3.0.x. </p>

    <p class="p">For Enterprise Edition customers, that version is Couchbase Server 2.5.1. For Community
      Edition users, that version is Couchbase Server 2.2.0.</p>

    <p class="p">Prior to upgrade, back up the files.</p>

    
    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
        
        
        <thead class="thead" align="left">
          <tr class="row">
            <th class="entry" valign="top" width="23.640661938534276%" id="d69630e49">Platform</th>

            <th class="entry" valign="top" width="76.3593380614657%" id="d69630e52">Location</th>

          </tr>

        </thead>

        <tbody class="tbody">
          <tr class="row">
            <td class="entry" valign="top" width="23.640661938534276%" headers="d69630e49 ">Linux</td>

            <td class="entry" valign="top" width="76.3593380614657%" headers="d69630e52 "><span class="ph filepath">/opt/couchbase/var/lib/couchbase/config/config.dat</span></td>

          </tr>

          <tr class="row">
            <td class="entry" valign="top" width="23.640661938534276%" headers="d69630e49 ">Windows</td>

            <td class="entry" valign="top" width="76.3593380614657%" headers="d69630e52 "><span class="ph filepath">C:\Program&nbsp;Files\Couchbase\Server\Config\var\lib\couchbase\config\config.dat</span></td>

          </tr>

        </tbody>

      </table>
</div>

    
    
    <div class="section"><h2 class="title sectiontitle">Upgrading from Community Edition to Enterprise Edition</h2>
      <div class="note note"><span class="notetitle">Note:</span> Use the same
        Couchbase Server version number when upgrading to the Enterprise Edition. Version
        differences can result in a failed upgrade.</div>

      
    </div>

    
    <div class="section"><h2 class="title sectiontitle">Upgrading to 3.0.x</h2></div>

    
    <p class="p">With encryption access, the following port is reserved for client access to data nodes using
      SSL.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="22.675736961451246%" id="d69630e108">Port</th>

              <th class="entry" valign="top" width="77.32426303854876%" id="d69630e111">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="22.675736961451246%" headers="d69630e108 ">11207</td>

              <td class="entry" valign="top" width="77.32426303854876%" headers="d69630e111 ">Internal/External Bucket Port for SSL</td>

            </tr>

          </tbody>

        </table>
</div>

    
    
    <div class="section"><h2 class="title sectiontitle">Upgrading to 2.5.x</h2>
      
      <p class="p">Before upgrading to 2.5.x:</p>

      
      <p class="p">If buckets are using any of
        the following reserved ports, change the port for the bucket. Otherwise, XDCR data
        encryption won't be available. (This applies both to offline and online upgrades.)
      </p>

      <div class="note important"><span class="importanttitle">Important:</span> Verify that the Secure Socket Layer (SSL) reserved ports are
        available prior to using XDCR data encryption. </div>

      
      <p class="p">With XDCR data encryption, the
        following ports are reserved:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
            
            
            <thead class="thead" align="left">
              <tr class="row">
                <th class="entry" valign="top" width="22.675736961451246%" id="d69630e157">Port</th>

                <th class="entry" valign="top" width="77.32426303854876%" id="d69630e160">Description</th>

              </tr>

            </thead>

            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" width="22.675736961451246%" headers="d69630e157 ">11214</td>

                <td class="entry" valign="top" width="77.32426303854876%" headers="d69630e160 ">Incoming SSL proxy</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="22.675736961451246%" headers="d69630e157 ">11215</td>

                <td class="entry" valign="top" width="77.32426303854876%" headers="d69630e160 ">Internal outgoing SSL proxy</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="22.675736961451246%" headers="d69630e157 ">18091</td>

                <td class="entry" valign="top" width="77.32426303854876%" headers="d69630e160 ">Internal REST HTTPS for SSL</td>

              </tr>

              <tr class="row">
                <td class="entry" valign="top" width="22.675736961451246%" headers="d69630e157 ">18092</td>

                <td class="entry" valign="top" width="77.32426303854876%" headers="d69630e160 ">Internal CAPI HTTPS for SSL </td>

              </tr>

            </tbody>

          </table>
</div>

      
      <div class="note note"><span class="notetitle">Note:</span> If Couchbase Server 2.5 has more than two (2) replicas, the first swap rebalance takes additional time. 
        This behavior is expected.</div>

      
      <div class="note restriction"><span class="restrictiontitle">Restriction:</span> The RPM package manager does not support the  
        <samp class="ph codeph">--relocate</samp> option because it cannot correctly detect which release must be kept and which must be replaced. 
        As result, all binary files and their wrapper scripts cannot be correctly installed into the relocated bin directory 
        during upgrade.
      </div>

    </div>

  </div>


 
<nav class="related-links"><h2>Related information</h2>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Install/upgrading.html" title="The Couchbase Server can be upgraded online (using swap rebalance or the standard online upgrade), offline, or using XDCR.">Upgrading</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../Install/upgrade-online.html" title="Online upgrade with swap rebalance is the preferred upgrade method because cluster capacity is always maintained throughout the upgrade.">Online upgrade with swap rebalance</a></div>
</div>
</nav></div><footer class="developer-portal-footer" role="contentinfo"><p class="legal"><span class="license">© 2011–2015 <b class="company-name">Couchbase</b> All rights reserved.</span><a href="http://www.couchbase.com/developers">Developer Portal</a><a href="http://forums.couchbase.com">Forums</a><a href="http://www.couchbase.com/downloads">Download</a><a href="http://support.couchbase.com/">Customer Support Login</a></p></footer></div></main><script src="../assets/javascripts/vendor/prism.js"></script><script type="text/javascript">var BASEPATH='../';</script><script src="../assets/javascripts/init.js"></script><script type="text/javascript" src="https://issues.couchbase.com/s/en_US-pvmaib-418945332/845/131/1.2.9/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=86389172"></script></body></html>